<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=no">
  <title>空美卡</title>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/normalize.css">
  <link rel="stylesheet" href="./assets/css/app.css">
  <script src="//res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
  <script src="//cdn.jsdelivr.net/jquery/2.2.3/jquery.slim.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/axios@0.19.0/dist/axios.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/promise-polyfill@8.1.3/dist/polyfill.min.js"></script>
</head>
<body class="share-body" style="background-color: #a1ceed;">
    <noscript>
      <strong>We're sorry but the page doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app">
        <div class="container">
            <div class="card" id="card">
                <img src="./assets/images/card/1.jpg" class="bg" alt="">
                <div class="card-info">
                    <div class="inner">
                        <div class="qrcode" id="qrcode"></div>
                        <div class="card-text">
                            <header>
                                <img src="./assets/images/tmp/avatar.png" class="card-avatar" alt="">
                                <h3>小丸子</h3>
                            </header>
                            <p>经常想起我们一起读书、运动的日子。送你一杯黑源素，祝你健康开心每一天！</p>
                        </div>
                    </div>
                </div>
            </div>
            <a href="#" class="btn btn-block">立即领取 50 元代金券</a>
        </div>
    </div>
    <script src="./assets/js/app.js"></script>
    <script src="./assets/js/libs/html2canvas.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/jquery.qrcode@1.0.3/jquery.qrcode.min.js"></script>
    <script>
    $(function() {
        // window.SHARE_TITLE = '定义本页分享里的标题文字';    // 可选，默认为页面标题
        window.SHARE_DESC = '定义本页分享里的描述文字';     // 可选
        // window.SHARE_LINK = 'http://baidu.com';     // 可选，默认为当前页面地址

        $('#qrcode').qrcode({
            text: "http://baidu.com",
            width: 135,
            height: 135,
            typeNumber: -1
        });	
    });
    window.onload = function() {
        html2canvas(document.getElementById('card'), {
          allowTaint: true,
          useCORS: true,
          scale: window.devicePixelRatio,
          backgroundColor: null,
        }).then(function(canvas) {
            var elemImg = '<img src=' + canvas.toDataURL('image/png') + ' width="100%" id="canvas-img" />';
            document.getElementById('card').innerHTML = elemImg;
        });
    };
    </script>
</body>
</html>
